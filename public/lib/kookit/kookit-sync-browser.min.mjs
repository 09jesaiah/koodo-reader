function __awaiter(e,i,a,l){return new(a=a||Promise)(function(r,t){function o(e){try{n(l.next(e))}catch(e){t(e)}}function s(e){try{n(l.throw(e))}catch(e){t(e)}}function n(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(o,s)}n((l=l.apply(e,i||[])).next())})}const driveConfig={callbackUrl:"https://web.koodoreader.com",dropboxAuthUrl:"https://cloud.960960.xyz/api/v1/third_auth/dropbox_auth",dropboxRefreshUrl:"https://cloud.960960.xyz/api/v1/third_auth/dropbox_refresh",onedriveAuthUrl:"https://cloud.960960.xyz/api/v1/third_auth/onedrive_auth",onedriveRefreshUrl:"https://cloud.960960.xyz/api/v1/third_auth/onedrive_refresh",googleAuthUrl:"https://cloud.960960.xyz/api/v1/third_auth/google_auth",googleRefreshUrl:"https://cloud.960960.xyz/api/v1/third_auth/google_refresh",s3DownloadUrl:"http://192.168.28.234:8000/api/v1/thirdparty/s3_download",s3UploadUrl:"http://192.168.28.234:8000/api/v1/thirdparty/s3_upload",s3ListUrl:"http://192.168.28.234:8000/api/v1/thirdparty/s3_list",dropboxClientId:"vnc67byrssocvy1",onedriveClientId:"506df58a-29ab-4020-afc5-6f423dc80f35",googleClientId:"1051055003225-ph1f5fvh328dhv7bco5jitlnfhg6ks2t.apps.googleusercontent.com"};function bind(e,t){return function(){return e.apply(t,arguments)}}const toString=Object.prototype["toString"],getPrototypeOf=Object["getPrototypeOf"],kindOf=(r=>e=>{const t=toString.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=t=>(t=t.toLowerCase(),e=>kindOf(e)===t),typeOfTest=t=>e=>typeof e===t,isArray=Array["isArray"],isUndefined=typeOfTest("undefined");function isBuffer(e){return null!==e&&!isUndefined(e)&&null!==e.constructor&&!isUndefined(e.constructor)&&isFunction(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&isArrayBuffer(e.buffer),t}const isString=typeOfTest("string"),isFunction=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=e=>null!==e&&"object"==typeof e,isBoolean=e=>!0===e||!1===e,isPlainObject=e=>{if("object"!==kindOf(e))return!1;var t=getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=e=>isObject(e)&&isFunction(e.pipe),isFormData=e=>{var t;return e&&("function"==typeof FormData&&e instanceof FormData||isFunction(e.append)&&("formdata"===(t=kindOf(e))||"object"===t&&isFunction(e.toString)&&"[object FormData]"===e.toString()))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(t,r,{allOwnKeys:o=!1}={}){if(null!=t){let e;var s;if("object"!=typeof t&&(t=[t]),isArray(t))for(e=0,s=t.length;e<s;e++)r.call(null,t[e],e,t);else{var n,i=o?Object.getOwnPropertyNames(t):Object.keys(t),a=i.length;for(e=0;e<a;e++)n=i[e],r.call(null,t[n],n,t)}}}function findKey(e,t){t=t.toLowerCase();var r=Object.keys(e);let o=r.length,s;for(;0<o--;)if(s=r[o],t===s.toLowerCase())return s;return null}const _global="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,isContextDefined=e=>!isUndefined(e)&&e!==_global;function merge(){const r=(isContextDefined(this)&&this||{})["caseless"],o={};var s=(e,t)=>{t=r&&findKey(o,t)||t;isPlainObject(o[t])&&isPlainObject(e)?o[t]=merge(o[t],e):isPlainObject(e)?o[t]=merge({},e):isArray(e)?o[t]=e.slice():o[t]=e};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&forEach(arguments[e],s);return o}const extend=(r,e,o,{allOwnKeys:t}={})=>(forEach(e,(e,t)=>{o&&isFunction(e)?r[t]=bind(e,o):r[t]=e},{allOwnKeys:t}),r),stripBOM=e=>e=65279===e.charCodeAt(0)?e.slice(1):e,inherits=(e,t,r,o)=>{e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject=(e,t,r,o)=>{var s,n;let i;const a={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;0<i--;)n=s[i],o&&!o(n,e,t)||a[n]||(t[n]=e[n],a[n]=!0)}while((e=!1!==r&&getPrototypeOf(e))&&(!r||r(e,t))&&e!==Object.prototype);return t},endsWith=(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;t=e.indexOf(t,r);return-1!==t&&t===r},toArray=e=>{if(!e)return null;if(isArray(e))return e;let t=e.length;if(!isNumber(t))return null;const r=new Array(t);for(;0<t--;)r[t]=e[t];return r},isTypedArray=(t=>e=>t&&e instanceof t)("undefined"!=typeof Uint8Array&&getPrototypeOf(Uint8Array)),forEachEntry=(e,t)=>{const r=e&&e[Symbol.iterator],o=r.call(e);for(;(s=o.next())&&!s.done;){var s=s.value;t.call(e,s[0],s[1])}},matchAll=(e,t)=>{var r;const o=[];for(;null!==(r=e.exec(t));)o.push(r);return o},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),hasOwnProperty=(({hasOwnProperty:r})=>(e,t)=>r.call(e,t))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(o,s)=>{var e=Object.getOwnPropertyDescriptors(o);const n={};forEach(e,(e,t)=>{var r;!1!==(r=s(e,t,o))&&(n[t]=r||e)}),Object.defineProperties(o,n)},freezeMethods=o=>{reduceDescriptors(o,(e,t)=>{if(isFunction(o)&&-1!==["arguments","caller","callee"].indexOf(t))return!1;var r=o[t];isFunction(r)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")}))})},toObjectSet=(e,t)=>{const r={};var o=e=>{e.forEach(e=>{r[e]=!0})};return isArray(e)?o(e):o(String(e).split(t)),r},noop=()=>{},toFiniteNumber=(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT:DIGIT,ALPHA:ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(e=16,t=ALPHABET.ALPHA_DIGIT)=>{let r="";for(var o=t["length"];e--;)r+=t[Math.random()*o|0];return r};function isSpecCompliantForm(e){return!!(e&&isFunction(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])}const toJSONObject=e=>{const t=new Array(10),s=(e,r)=>{if(isObject(e)){if(0<=t.indexOf(e))return;if(!("toJSON"in e)){t[r]=e;const o=isArray(e)?[]:{};return forEach(e,(e,t)=>{e=s(e,r+1);isUndefined(e)||(o[t]=e)}),t[r]=void 0,o}}return e};return s(e,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=e=>e&&(isObject(e)||isFunction(e))&&isFunction(e.then)&&isFunction(e.catch),_setImmediate=((e,t)=>{return e?setImmediate:t?(r=`axios@${Math.random()}`,o=[],_global.addEventListener("message",({source:e,data:t})=>{e===_global&&t===r&&o.length&&o.shift()()},!1),e=>{o.push(e),_global.postMessage(r,"*")}):e=>setTimeout(e);var r,o})("function"==typeof setImmediate,isFunction(_global.postMessage)),asap="undefined"!=typeof queueMicrotask?queueMicrotask.bind(_global):"undefined"!=typeof process&&process.nextTick||_setImmediate;var utils$1={isArray:isArray,isArrayBuffer:isArrayBuffer,isBuffer:isBuffer,isFormData:isFormData,isArrayBufferView:isArrayBufferView,isString:isString,isNumber:isNumber,isBoolean:isBoolean,isObject:isObject,isPlainObject:isPlainObject,isReadableStream:isReadableStream,isRequest:isRequest,isResponse:isResponse,isHeaders:isHeaders,isUndefined:isUndefined,isDate:isDate,isFile:isFile,isBlob:isBlob,isRegExp:isRegExp,isFunction:isFunction,isStream:isStream,isURLSearchParams:isURLSearchParams,isTypedArray:isTypedArray,isFileList:isFileList,forEach:forEach,merge:merge,extend:extend,trim:trim,stripBOM:stripBOM,inherits:inherits,toFlatObject:toFlatObject,kindOf:kindOf,kindOfTest:kindOfTest,endsWith:endsWith,toArray:toArray,forEachEntry:forEachEntry,matchAll:matchAll,isHTMLForm:isHTMLForm,hasOwnProperty:hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors:reduceDescriptors,freezeMethods:freezeMethods,toObjectSet:toObjectSet,toCamelCase:toCamelCase,noop:noop,toFiniteNumber:toFiniteNumber,findKey:findKey,global:_global,isContextDefined:isContextDefined,ALPHABET:ALPHABET,generateString:generateString,isSpecCompliantForm:isSpecCompliantForm,toJSONObject:toJSONObject,isAsyncFn:isAsyncFn,isThenable:isThenable,setImmediate:_setImmediate,asap:asap};function AxiosError(e,t,r,o,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),o&&(this.request=o),s&&(this.response=s,this.status=s.status||null)}utils$1.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{descriptors[e]={value:e}}),Object.defineProperties(AxiosError,descriptors),Object.defineProperty(prototype$1,"isAxiosError",{value:!0}),AxiosError.from=(e,t,r,o,s,n)=>{const i=Object.create(prototype$1);return utils$1.toFlatObject(e,i,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),AxiosError.call(i,e.message,t,r,o,s),i.cause=e,i.name=e.name,n&&Object.assign(i,n),i};var httpAdapter=null;function isVisitable(e){return utils$1.isPlainObject(e)||utils$1.isArray(e)}function removeBrackets(e){return utils$1.endsWith(e,"[]")?e.slice(0,-2):e}function renderKey(e,t,r){return e?e.concat(t).map(function(e,t){return e=removeBrackets(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}function isFlatArray(e){return utils$1.isArray(e)&&!e.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(e){return/^is[A-Z]/.test(e)});function toFormData(e,s,t){if(!utils$1.isObject(e))throw new TypeError("target must be an object");s=s||new FormData;const n=(t=utils$1.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!utils$1.isUndefined(t[e])})).metaTokens,i=t.visitor||o,a=t.dots,l=t.indexes;const r=(t.Blob||"undefined"!=typeof Blob&&Blob)&&utils$1.isSpecCompliantForm(s);if(!utils$1.isFunction(i))throw new TypeError("visitor must be a function");function u(e){if(null===e)return"";if(utils$1.isDate(e))return e.toISOString();if(!r&&utils$1.isBlob(e))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(e)||utils$1.isTypedArray(e)?r&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function o(e,r,t){let o=e;if(e&&!t&&"object"==typeof e)if(utils$1.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(utils$1.isArray(e)&&isFlatArray(e)||(utils$1.isFileList(e)||utils$1.endsWith(r,"[]"))&&(o=utils$1.toArray(e)))return r=removeBrackets(r),o.forEach(function(e,t){utils$1.isUndefined(e)||null===e||s.append(!0===l?renderKey([r],t,a):null===l?r:r+"[]",u(e))}),!1;return!!isVisitable(e)||(s.append(renderKey(t,r,a),u(e)),!1)}const c=[],d=Object.assign(predicates,{defaultVisitor:o,convertValue:u,isVisitable:isVisitable});if(!utils$1.isObject(e))throw new TypeError("data must be an object");return function r(e,o){if(!utils$1.isUndefined(e)){if(-1!==c.indexOf(e))throw Error("Circular reference detected in "+o.join("."));c.push(e),utils$1.forEach(e,function(e,t){!0===(!(utils$1.isUndefined(e)||null===e)&&i.call(s,e,utils$1.isString(t)?t.trim():t,o,d))&&r(e,o?o.concat(t):[t])}),c.pop()}}(e),s}function encode$1(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function AxiosURLSearchParams(e,t){this._pairs=[],e&&toFormData(e,this,t)}const prototype=AxiosURLSearchParams.prototype;function encode(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(e,t,r){if(!t)return e;var o=r&&r.encode||encode;const s=(r=utils$1.isFunction(r)?{serialize:r}:r)&&r.serialize;let n;return n=s?s(t,r):utils$1.isURLSearchParams(t)?t.toString():new AxiosURLSearchParams(t,r).toString(o),n&&(-1!==(o=e.indexOf("#"))&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+n),e}prototype.append=function(e,t){this._pairs.push([e,t])},prototype.toString=function(t){const r=t?function(e){return t.call(this,e,encode$1)}:encode$1;return this._pairs.map(function(e){return r(e[0])+"="+r(e[1])},"").join("&")};class InterceptorManager{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){utils$1.forEach(this.handlers,function(e){null!==e&&t(e)})}}var InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1="undefined"!=typeof URLSearchParams?URLSearchParams:AxiosURLSearchParams,FormData$1="undefined"!=typeof FormData?FormData:null,Blob$1="undefined"!=typeof Blob?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]};const hasBrowserEnv="undefined"!=typeof window&&"undefined"!=typeof document,_navigator="object"==typeof navigator&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,origin=hasBrowserEnv&&window.location.href||"http://localhost";var utils=Object.freeze({__proto__:null,hasBrowserEnv:hasBrowserEnv,hasStandardBrowserWebWorkerEnv:hasStandardBrowserWebWorkerEnv,hasStandardBrowserEnv:hasStandardBrowserEnv,navigator:_navigator,origin:origin}),platform={...utils,...platform$1};function toURLEncodedForm(e,t){return toFormData(e,new platform.classes.URLSearchParams,Object.assign({visitor:function(e,t,r,o){return platform.isNode&&utils$1.isBuffer(e)?(this.append(t,e.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},t))}function parsePropPath(e){return utils$1.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}function arrayToObject(e){const t={};var r=Object.keys(e);let o;var s,n=r.length;for(o=0;o<n;o++)s=r[o],t[s]=e[s];return t}function formDataToJSON(e){if(utils$1.isFormData(e)&&utils$1.isFunction(e.entries)){const r={};return utils$1.forEachEntry(e,(e,t)=>{!function e(t,r,o,s){let n=t[s++];if("__proto__"===n)return!0;var i=Number.isFinite(+n),a=s>=t.length;return n=!n&&utils$1.isArray(o)?o.length:n,a?utils$1.hasOwnProp(o,n)?o[n]=[o[n],r]:o[n]=r:(o[n]&&utils$1.isObject(o[n])||(o[n]=[]),e(t,r,o[n],s)&&utils$1.isArray(o[n])&&(o[n]=arrayToObject(o[n]))),!i}(parsePropPath(e),t,r,0)}),r}return null}function stringifySafely(e,t,r){if(utils$1.isString(e))try{return(t||JSON.parse)(e),utils$1.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(r||JSON.stringify)(e)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"";var o,s=-1<r.indexOf("application/json"),n=utils$1.isObject(e);if(n&&utils$1.isHTMLForm(e)&&(e=new FormData(e)),utils$1.isFormData(e))return s?JSON.stringify(formDataToJSON(e)):e;if(utils$1.isArrayBuffer(e)||utils$1.isBuffer(e)||utils$1.isStream(e)||utils$1.isFile(e)||utils$1.isBlob(e)||utils$1.isReadableStream(e))return e;if(utils$1.isArrayBufferView(e))return e.buffer;if(utils$1.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(n){if(-1<r.indexOf("application/x-www-form-urlencoded"))return toURLEncodedForm(e,this.formSerializer).toString();if((o=utils$1.isFileList(e))||-1<r.indexOf("multipart/form-data")){const i=this.env&&this.env.FormData;return toFormData(o?{"files[]":e}:e,i&&new i,this.formSerializer)}}return n||s?(t.setContentType("application/json",!1),stringifySafely(e)):e}],transformResponse:[function(e){var t=this.transitional||defaults.transitional,r=t&&t.forcedJSONParsing,o="json"===this.responseType;if(utils$1.isResponse(e)||utils$1.isReadableStream(e))return e;if(e&&utils$1.isString(e)&&(r&&!this.responseType||o)){o=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(e){if(o){if("SyntaxError"===e.name)throw AxiosError.from(e,AxiosError.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(e){return 200<=e&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],e=>{defaults.headers[e]={}});var defaults$1=defaults;const ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var parseHeaders=e=>{const t={};let r,o,s;return e&&e.split("\n").forEach(function(e){s=e.indexOf(":"),r=e.substring(0,s).trim().toLowerCase(),o=e.substring(s+1).trim(),!r||t[r]&&ignoreDuplicateOf[r]||("set-cookie"===r?t[r]?t[r].push(o):t[r]=[o]:t[r]=t[r]?t[r]+", "+o:o)}),t};const $internals=Symbol("internals");function normalizeHeader(e){return e&&String(e).trim().toLowerCase()}function normalizeValue(e){return!1===e||null==e?e:utils$1.isArray(e)?e.map(normalizeValue):String(e)}function parseTokens(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;for(var o;o=r.exec(e);)t[o[1]]=o[2];return t}const isValidHeaderName=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function matchHeaderValue(e,t,r,o,s){return utils$1.isFunction(o)?o.call(this,t,r):utils$1.isString(t=s?r:t)?utils$1.isString(o)?-1!==t.indexOf(o):utils$1.isRegExp(o)?o.test(t):void 0:void 0}function formatHeader(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function buildAccessors(e,s){const t=utils$1.toCamelCase(" "+s);["get","set","has"].forEach(o=>{Object.defineProperty(e,o+t,{value:function(e,t,r){return this[o].call(this,s,e,t,r)},configurable:!0})})}class AxiosHeaders{constructor(e){e&&this.set(e)}set(e,t,r){const s=this;function o(e,t,r){var o=normalizeHeader(t);if(!o)throw new Error("header name must be a non-empty string");o=utils$1.findKey(s,o);o&&void 0!==s[o]&&!0!==r&&(void 0!==r||!1===s[o])||(s[o||t]=normalizeValue(e))}var n=(e,r)=>utils$1.forEach(e,(e,t)=>o(e,t,r));if(utils$1.isPlainObject(e)||e instanceof this.constructor)n(e,t);else if(utils$1.isString(e)&&(e=e.trim())&&!isValidHeaderName(e))n(parseHeaders(e),t);else if(utils$1.isHeaders(e))for(var[i,a]of e.entries())o(a,i,r);else null!=e&&o(t,e,r);return this}get(e,t){if(e=normalizeHeader(e)){var r=utils$1.findKey(this,e);if(r){e=this[r];if(!t)return e;if(!0===t)return parseTokens(e);if(utils$1.isFunction(t))return t.call(this,e,r);if(utils$1.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=normalizeHeader(e)){e=utils$1.findKey(this,e);return!(!e||void 0===this[e]||t&&!matchHeaderValue(this,this[e],e,t))}return!1}delete(e,t){const r=this;let o=!1;function s(e){(e=normalizeHeader(e))&&(!(e=utils$1.findKey(r,e))||t&&!matchHeaderValue(r,r[e],e,t)||(delete r[e],o=!0))}return utils$1.isArray(e)?e.forEach(s):s(e),o}clear(e){var t=Object.keys(this);let r=t.length,o=!1;for(;r--;){var s=t[r];e&&!matchHeaderValue(this,this[s],s,e,!0)||(delete this[s],o=!0)}return o}normalize(o){const s=this,n={};return utils$1.forEach(this,(e,t)=>{var r=utils$1.findKey(n,t);if(r)return s[r]=normalizeValue(e),void delete s[t];r=o?formatHeader(t):String(t).trim();r!==t&&delete s[t],s[r]=normalizeValue(e),n[r]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(r){const o=Object.create(null);return utils$1.forEach(this,(e,t)=>{null!=e&&!1!==e&&(o[t]=r&&utils$1.isArray(e)?e.join(", "):e)}),o}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(e=>r.set(e)),r}static accessor(e){const r=(this[$internals]=this[$internals]={accessors:{}}).accessors,o=this.prototype;function t(e){var t=normalizeHeader(e);r[t]||(buildAccessors(o,e),r[t]=!0)}return utils$1.isArray(e)?e.forEach(t):t(e),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),utils$1.reduceDescriptors(AxiosHeaders.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[r]=e}}}),utils$1.freezeMethods(AxiosHeaders);var AxiosHeaders$1=AxiosHeaders;function transformData(e,t){const r=this||defaults$1;var o=t||r;const s=AxiosHeaders$1.from(o.headers);let n=o.data;return utils$1.forEach(e,function(e){n=e.call(r,n,s.normalize(),t?t.status:void 0)}),s.normalize(),n}function isCancel(e){return!(!e||!e.__CANCEL__)}function CanceledError(e,t,r){AxiosError.call(this,null==e?"canceled":e,AxiosError.ERR_CANCELED,t,r),this.name="CanceledError"}function settle(e,t,r){const o=r.config.validateStatus;r.status&&o&&!o(r.status)?t(new AxiosError("Request failed with status code "+r.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}function parseProtocol(e){e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return e&&e[1]||""}function speedometer(n,i){n=n||10;const a=new Array(n),l=new Array(n);let u=0,c=0,d;return i=void 0!==i?i:1e3,function(e){var t=Date.now(),r=l[c];d=d||t,a[u]=e,l[u]=t;let o=c,s=0;for(;o!==u;)s+=a[o++],o%=n;if(u=(u+1)%n,u===c&&(c=(c+1)%n),!(t-d<i)){r=r&&t-r;return r?Math.round(1e3*s/r):void 0}}}function throttle(r,e){let o=0,s=1e3/e,n,i;const a=(e,t=Date.now())=>{o=t,n=null,i&&(clearTimeout(i),i=null),r.apply(null,e)};return[(...e)=>{var t=Date.now(),r=t-o;r>=s?a(e,t):(n=e,i=i||setTimeout(()=>{i=null,a(n)},s-r))},()=>n&&a(n)]}utils$1.inherits(CanceledError,AxiosError,{__CANCEL__:!0});const progressEventReducer=(i,a,e=3)=>{let l=0;const u=speedometer(50,250);return throttle(e=>{var t=e.loaded,r=e.lengthComputable?e.total:void 0,o=t-l,s=u(o),n=t<=r;l=t,i({loaded:t,total:r,progress:r?t/r:void 0,bytes:o,rate:s||void 0,estimated:s&&r&&n?(r-t)/s:void 0,event:e,lengthComputable:null!=r,[a?"download":"upload"]:!0})},e)},progressEventDecorator=(t,r)=>{const o=null!=t;return[e=>r[0]({lengthComputable:o,total:t,loaded:e}),r[1]]},asyncDecorator=t=>(...e)=>utils$1.asap(()=>t(...e));var isURLSameOrigin=platform.hasStandardBrowserEnv?((t,r)=>e=>(e=new URL(e,platform.origin),t.protocol===e.protocol&&t.host===e.host&&(r||t.port===e.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(e,t,r,o,s,n){const i=[e+"="+encodeURIComponent(t)];utils$1.isNumber(r)&&i.push("expires="+new Date(r).toGMTString()),utils$1.isString(o)&&i.push("path="+o),utils$1.isString(s)&&i.push("domain="+s),!0===n&&i.push("secure"),document.cookie=i.join("; ")},read(e){e=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function combineURLs(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function buildFullPath(e,t){return e&&!isAbsoluteURL(t)?combineURLs(e,t):t}const headersToObject=e=>e instanceof AxiosHeaders$1?{...e}:e;function mergeConfig(o,s){s=s||{};const n={};function i(e,t,r,o){return utils$1.isPlainObject(e)&&utils$1.isPlainObject(t)?utils$1.merge.call({caseless:o},e,t):utils$1.isPlainObject(t)?utils$1.merge({},t):utils$1.isArray(t)?t.slice():t}function a(e,t,r,o){return utils$1.isUndefined(t)?utils$1.isUndefined(e)?void 0:i(void 0,e,0,o):i(e,t,0,o)}function e(e,t){if(!utils$1.isUndefined(t))return i(void 0,t)}function t(e,t){return utils$1.isUndefined(t)?utils$1.isUndefined(e)?void 0:i(void 0,e):i(void 0,t)}function l(e,t,r){return r in s?i(e,t):r in o?i(void 0,e):void 0}const u={url:e,method:e,data:e,baseURL:t,transformRequest:t,transformResponse:t,paramsSerializer:t,timeout:t,timeoutMessage:t,withCredentials:t,withXSRFToken:t,adapter:t,responseType:t,xsrfCookieName:t,xsrfHeaderName:t,onUploadProgress:t,onDownloadProgress:t,decompress:t,maxContentLength:t,maxBodyLength:t,beforeRedirect:t,transport:t,httpAgent:t,httpsAgent:t,cancelToken:t,socketPath:t,responseEncoding:t,validateStatus:l,headers:(e,t,r)=>a(headersToObject(e),headersToObject(t),0,!0)};return utils$1.forEach(Object.keys(Object.assign({},o,s)),function(e){const t=u[e]||a;var r=t(o[e],s[e],e);utils$1.isUndefined(r)&&t!==l||(n[e]=r)}),n}var resolveConfig=e=>{const t=mergeConfig({},e);let{data:r,withXSRFToken:o,xsrfHeaderName:s,xsrfCookieName:n,headers:i,auth:a}=t;t.headers=i=AxiosHeaders$1.from(i),t.url=buildURL(buildFullPath(t.baseURL,t.url),e.params,e.paramsSerializer),a&&i.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(utils$1.isFormData(r))if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(!1!==(l=i.getContentType())){const[u,...c]=l?l.split(";").map(e=>e.trim()).filter(Boolean):[];i.setContentType([u||"multipart/form-data",...c].join("; "))}return platform.hasStandardBrowserEnv&&(o&&utils$1.isFunction(o)&&(o=o(t)),!(o||!1!==o&&isURLSameOrigin(t.url))||(e=s&&n&&cookies.read(n))&&i.set(s,e)),t};const isXHRAdapterSupported="undefined"!=typeof XMLHttpRequest;var xhrAdapter=isXHRAdapterSupported&&function(y){return new Promise(function(t,r){const o=resolveConfig(y);var e,s=o.data;const n=AxiosHeaders$1.from(o.headers).normalize();let{responseType:i,onUploadProgress:a,onDownloadProgress:l}=o,u,c,d;function f(){c&&c(),d&&d(),o.cancelToken&&o.cancelToken.unsubscribe(u),o.signal&&o.signal.removeEventListener("abort",u)}let p=new XMLHttpRequest;function h(){var e;p&&(e=AxiosHeaders$1.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),settle(function(e){t(e),f()},function(e){r(e),f()},{data:i&&"text"!==i&&"json"!==i?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:e,config:y,request:p}),p=null)}p.open(o.method.toUpperCase(),o.url,!0),p.timeout=o.timeout,"onloadend"in p?p.onloadend=h:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(h)},p.onabort=function(){p&&(r(new AxiosError("Request aborted",AxiosError.ECONNABORTED,y,p)),p=null)},p.onerror=function(){r(new AxiosError("Network Error",AxiosError.ERR_NETWORK,y,p)),p=null},p.ontimeout=function(){let e=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";var t=o.transitional||transitionalDefaults;o.timeoutErrorMessage&&(e=o.timeoutErrorMessage),r(new AxiosError(e,t.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,y,p)),p=null},void 0===s&&n.setContentType(null),"setRequestHeader"in p&&utils$1.forEach(n.toJSON(),function(e,t){p.setRequestHeader(t,e)}),utils$1.isUndefined(o.withCredentials)||(p.withCredentials=!!o.withCredentials),i&&"json"!==i&&(p.responseType=o.responseType),l&&([e,d]=progressEventReducer(l,!0),p.addEventListener("progress",e)),a&&p.upload&&([m,c]=progressEventReducer(a),p.upload.addEventListener("progress",m),p.upload.addEventListener("loadend",c)),(o.cancelToken||o.signal)&&(u=e=>{p&&(r(!e||e.type?new CanceledError(null,y,p):e),p.abort(),p=null)},o.cancelToken&&o.cancelToken.subscribe(u),o.signal&&(o.signal.aborted?u():o.signal.addEventListener("abort",u)));var m=parseProtocol(o.url);m&&-1===platform.protocols.indexOf(m)?r(new AxiosError("Unsupported protocol "+m+":",AxiosError.ERR_BAD_REQUEST,y)):p.send(s||null)})};const composeSignals=(o,s)=>{var e=(o=o?o.filter(Boolean):[])["length"];if(s||e){let t=new AbortController,r;const n=function(e){r||(r=!0,i(),e=e instanceof Error?e:this.reason,t.abort(e instanceof AxiosError?e:new CanceledError(e instanceof Error?e.message:e)))};let e=s&&setTimeout(()=>{e=null,n(new AxiosError(`timeout ${s} of ms exceeded`,AxiosError.ETIMEDOUT))},s);const i=()=>{o&&(e&&clearTimeout(e),e=null,o.forEach(e=>{e.unsubscribe?e.unsubscribe(n):e.removeEventListener("abort",n)}),o=null)};o.forEach(e=>e.addEventListener("abort",n));const a=t["signal"];return a.unsubscribe=()=>utils$1.asap(i),a}};var composeSignals$1=composeSignals;const streamChunk=function*(t,r){var o,s=t.byteLength;if(!r||s<r)yield t;else{let e=0;for(;e<s;)o=e+r,yield t.slice(e,o),e=o}},readBytes=async function*(e,t){for await(const r of readStream(e))yield*streamChunk(r,t)},readStream=async function*(e){if(e[Symbol.asyncIterator])yield*e;else{const o=e.getReader();try{for(;;){var{done:t,value:r}=await o.read();if(t)break;yield r}}finally{await o.cancel()}}},trackStream=(e,t,n,r)=>{const i=readBytes(e,t);let a=0,o,l=e=>{o||(o=!0,r&&r(e))};return new ReadableStream({async pull(e){try{var{done:t,value:r}=await i.next();if(t)return l(),void e.close();var o,s=r.byteLength;n&&(o=a+=s,n(o)),e.enqueue(new Uint8Array(r))}catch(e){throw l(e),e}},cancel(e){return l(e),i.return()}},{highWaterMark:2})},isFetchSupported="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,isReadableStreamSupported=isFetchSupported&&"function"==typeof ReadableStream,encodeText=isFetchSupported&&("function"==typeof TextEncoder?(t=>e=>t.encode(e))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),test=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let e=!1;var t=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),DEFAULT_CHUNK_SIZE=65536,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$1.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(e=>e.body)};isFetchSupported&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(r=>{resolvers[r]||(resolvers[r]=utils$1.isFunction(e[r])?e=>e[r]():(e,t)=>{throw new AxiosError(`Response type '${r}' is not supported`,AxiosError.ERR_NOT_SUPPORT,t)})})})(new Response);const getBodyLength=async e=>{if(null==e)return 0;if(utils$1.isBlob(e))return e.size;if(utils$1.isSpecCompliantForm(e)){const t=new Request(platform.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return utils$1.isArrayBufferView(e)||utils$1.isArrayBuffer(e)?e.byteLength:(utils$1.isURLSearchParams(e)&&(e+=""),utils$1.isString(e)?(await encodeText(e)).byteLength:void 0)},resolveBodyLength=async(e,t)=>{e=utils$1.toFiniteNumber(e.getContentLength());return null==e?getBodyLength(t):e};var fetchAdapter=isFetchSupported&&(async s=>{let{url:n,method:e,data:i,signal:t,cancelToken:r,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:u,headers:c,withCredentials:d="same-origin",fetchOptions:f}=resolveConfig(s);u=u?(u+"").toLowerCase():"text";let p=composeSignals$1([t,r&&r.toAbortSignal()],o),h;const m=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let y;try{if(l&&supportsRequestStream&&"get"!==e&&"head"!==e&&0!==(y=await resolveBodyLength(c,i))){let e=new Request(n,{method:"POST",body:i,duplex:"half"}),t;var g,b;utils$1.isFormData(i)&&(t=e.headers.get("content-type"))&&c.setContentType(t),e.body&&([g,b]=progressEventDecorator(y,progressEventReducer(asyncDecorator(l))),i=trackStream(e.body,DEFAULT_CHUNK_SIZE,g,b))}utils$1.isString(d)||(d=d?"include":"omit");var v="credentials"in Request.prototype;h=new Request(n,{...f,signal:p,method:e.toUpperCase(),headers:c.normalize().toJSON(),body:i,duplex:"half",credentials:v?d:void 0});let r=await fetch(h);var E=supportsResponseStream&&("stream"===u||"response"===u);if(supportsResponseStream&&(a||E&&m)){const w={};["status","statusText","headers"].forEach(e=>{w[e]=r[e]});var A=utils$1.toFiniteNumber(r.headers.get("content-length"));const[x,S]=a&&progressEventDecorator(A,progressEventReducer(asyncDecorator(a),!0))||[];r=new Response(trackStream(r.body,DEFAULT_CHUNK_SIZE,x,()=>{S&&S(),m&&m()}),w)}u=u||"text";let o=await resolvers[utils$1.findKey(resolvers,u)||"text"](r,s);return!E&&m&&m(),new Promise((e,t)=>{settle(e,t,{data:o,headers:AxiosHeaders$1.from(r.headers),status:r.status,statusText:r.statusText,config:s,request:h})})}catch(e){if(m&&m(),e&&"TypeError"===e.name&&/fetch/i.test(e.message))throw Object.assign(new AxiosError("Network Error",AxiosError.ERR_NETWORK,s,h),{cause:e.cause||e});throw AxiosError.from(e,e&&e.code,s,h)}});const knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$1.forEach(knownAdapters,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}});const renderReason=e=>`- ${e}`,isResolvedHandle=e=>utils$1.isFunction(e)||null===e||!1===e;var adapters={getAdapter:r=>{var o,e=(r=utils$1.isArray(r)?r:[r])["length"];let s;const n={};for(let t=0;t<e;t++){o=r[t];let e;if(s=o,!isResolvedHandle(o)&&(s=knownAdapters[(e=String(o)).toLowerCase()],void 0===s))throw new AxiosError(`Unknown adapter '${e}'`);if(s)break;n[e||"#"+t]=s}if(s)return s;{const t=Object.entries(n).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new AxiosError("There is no suitable adapter to dispatch the request "+(e?1<t.length?"since :\n"+t.map(renderReason).join("\n"):" "+renderReason(t[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}},adapters:knownAdapters};function throwIfCancellationRequested(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new CanceledError(null,e)}function dispatchRequest(t){throwIfCancellationRequested(t),t.headers=AxiosHeaders$1.from(t.headers),t.data=transformData.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1);const e=adapters.getAdapter(t.adapter||defaults$1.adapter);return e(t).then(function(e){return throwIfCancellationRequested(t),e.data=transformData.call(t,t.transformResponse,e),e.headers=AxiosHeaders$1.from(e.headers),e},function(e){return isCancel(e)||(throwIfCancellationRequested(t),e&&e.response&&(e.response.data=transformData.call(t,t.transformResponse,e.response),e.response.headers=AxiosHeaders$1.from(e.response.headers))),Promise.reject(e)})}const VERSION="1.7.8",validators$1={};["object","boolean","number","function","string","symbol"].forEach((t,r)=>{validators$1[t]=function(e){return typeof e===t||"a"+(r<1?"n ":" ")+t}});const deprecatedWarnings={};function assertOptions(e,t,r){if("object"!=typeof e)throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);var o=Object.keys(e);let s=o.length;for(;0<s--;){var n=o[s];const a=t[n];if(a){var i=e[n],i=void 0===i||a(i,n,e);if(!0!==i)throw new AxiosError("option "+n+" must be "+i,AxiosError.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new AxiosError("Unknown option "+n,AxiosError.ERR_BAD_OPTION)}}validators$1.transitional=function(o,s,r){function n(e,t){return"[Axios v"+VERSION+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(e,t,r)=>{if(!1===o)throw new AxiosError(n(t," has been removed"+(s?" in "+s:"")),AxiosError.ERR_DEPRECATED);return s&&!deprecatedWarnings[t]&&(deprecatedWarnings[t]=!0,console.warn(n(t," has been deprecated since v"+s+" and will be removed in the near future"))),!o||o(e,t,r)}},validators$1.spelling=function(r){return(e,t)=>(console.warn(`${t} is likely a misspelling of ${r}`),!0)};var validator={assertOptions:assertOptions,validators:validators$1};const validators=validator.validators;class Axios{constructor(e){this.defaults=e,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}async request(e,t){try{return this._request(e,t)}catch(t){if(t instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const r=e.stack?e.stack.replace(/^.+\n/,""):"";try{t.stack?r&&!String(t.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(t.stack+="\n"+r):t.stack=r}catch(e){}}throw t}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{};const{transitional:r,paramsSerializer:o,headers:s}=t=mergeConfig(this.defaults,t);void 0!==r&&validator.assertOptions(r,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),null!=o&&(utils$1.isFunction(o)?t.paramsSerializer={serialize:o}:validator.assertOptions(o,{encode:validators.function,serialize:validators.function},!0)),validator.assertOptions(t,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();e=s&&utils$1.merge(s.common,s[t.method]);s&&utils$1.forEach(["delete","get","head","post","put","patch","common"],e=>{delete s[e]}),t.headers=AxiosHeaders$1.concat(e,s);const n=[];let i=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,n.unshift(e.fulfilled,e.rejected))});const a=[];this.interceptors.response.forEach(function(e){a.push(e.fulfilled,e.rejected)});let l,u=0,c;if(!i){const f=[dispatchRequest.bind(this),void 0];for(f.unshift.apply(f,n),f.push.apply(f,a),c=f.length,l=Promise.resolve(t);u<c;)l=l.then(f[u++],f[u++]);return l}c=n.length;let d=t;for(u=0;u<c;){const p=n[u++],h=n[u++];try{d=p(d)}catch(e){h.call(this,e);break}}try{l=dispatchRequest.call(this,d)}catch(e){return Promise.reject(e)}for(u=0,c=a.length;u<c;)l=l.then(a[u++],a[u++]);return l}getUri(e){return buildURL(buildFullPath((e=mergeConfig(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}utils$1.forEach(["delete","get","head","options"],function(r){Axios.prototype[r]=function(e,t){return this.request(mergeConfig(t||{},{method:r,url:e,data:(t||{}).data}))}}),utils$1.forEach(["post","put","patch"],function(s){function e(o){return function(e,t,r){return this.request(mergeConfig(r||{},{method:s,headers:o?{"Content-Type":"multipart/form-data"}:{},url:e,data:t}))}}Axios.prototype[s]=e(),Axios.prototype[s+"Form"]=e(!0)});var Axios$1=Axios;class CancelToken{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let o;this.promise=new Promise(function(e){o=e});const s=this;this.promise.then(t=>{if(s._listeners){let e=s._listeners.length;for(;0<e--;)s._listeners[e](t);s._listeners=null}}),this.promise.then=e=>{let t;const r=new Promise(e=>{s.subscribe(e),t=e}).then(e);return r.cancel=function(){s.unsubscribe(t)},r},e(function(e,t,r){s.reason||(s.reason=new CanceledError(e,t,r),o(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){!this._listeners||-1!==(e=this._listeners.indexOf(e))&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=e=>{t.abort(e)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new CancelToken(function(e){t=e}),cancel:t}}}var CancelToken$1=CancelToken;function spread(t){return function(e){return t.apply(null,e)}}function isAxiosError(e){return utils$1.isObject(e)&&!0===e.isAxiosError}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([e,t])=>{HttpStatusCode[t]=e});var HttpStatusCode$1=HttpStatusCode;function createInstance(t){var e=new Axios$1(t);const r=bind(Axios$1.prototype.request,e);return utils$1.extend(r,Axios$1.prototype,e,{allOwnKeys:!0}),utils$1.extend(r,e,null,{allOwnKeys:!0}),r.create=function(e){return createInstance(mergeConfig(t,e))},r}const axios=createInstance(defaults$1);axios.Axios=Axios$1,axios.CanceledError=CanceledError,axios.CancelToken=CancelToken$1,axios.isCancel=isCancel,axios.VERSION=VERSION,axios.toFormData=toFormData,axios.AxiosError=AxiosError,axios.Cancel=axios.CanceledError,axios.all=function(e){return Promise.all(e)},axios.spread=spread,axios.isAxiosError=isAxiosError,axios.mergeConfig=mergeConfig,axios.AxiosHeaders=AxiosHeaders$1,axios.formToJSON=e=>formDataToJSON(utils$1.isHTMLForm(e)?new FormData(e):e),axios.getAdapter=adapters.getAdapter,axios.HttpStatusCode=HttpStatusCode$1,axios.default=axios;var axios$1=axios;class DropboxBase{constructor(e){this.config=e}listFiles(s){return __awaiter(this,void 0,void 0,function*(){try{var e=this.config["refresh_token"],t=yield axios$1.post(driveConfig.dropboxRefreshUrl,{refresh_token:e});console.log(t,"res");var r=t.data.access_token;const o=yield axios$1.post("https://api.dropboxapi.com/2/files/list_folder",{path:"/"+s},{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});return console.log(o.data.entries.map(e=>e.name)),o.data.entries.map(e=>e.name)}catch(e){throw console.error("Error listing files:",e),e}})}refreshToken(e){return __awaiter(this,void 0,void 0,function*(){return(yield axios$1.post(driveConfig.dropboxRefreshUrl,{refresh_token:e})).data.access_token})}authToken(t){return __awaiter(this,void 0,void 0,function*(){var e=yield axios$1.post(driveConfig.dropboxAuthUrl,{code:t,redirect_uri:driveConfig.callbackUrl});return console.log(e.data),e.data.refresh_token})}}class DropboxUtil extends DropboxBase{constructor(e){super(e)}uploadFile(i,a){return new Promise((s,n)=>__awaiter(this,void 0,void 0,function*(){try{var e=this.config["refresh_token"],t=(yield axios$1.post(driveConfig.dropboxRefreshUrl,{refresh_token:e})).data.access_token;console.log(t);var r=a.split("/").pop()||"",o=new File([i],r,{lastModified:(new Date).getTime(),type:i.type});200===(yield axios$1.post("https://content.dropboxapi.com/2/files/upload",o,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/octet-stream","Dropbox-API-Arg":JSON.stringify({path:"/"+r,mode:"overwrite",autorename:!0,mute:!1})}})).status?s(!0):n(!1)}catch(e){console.error("Error uploading file:",e),n(!1)}}))}downloadFile(s){return new Promise((r,o)=>__awaiter(this,void 0,void 0,function*(){var e=this.config["refresh_token"],e=(yield axios$1.post(driveConfig.dropboxRefreshUrl,{refresh_token:e})).data.access_token;try{var t=yield axios$1({url:"https://content.dropboxapi.com/2/files/download",method:"post",headers:{Authorization:`Bearer ${e}`,"Dropbox-API-Arg":JSON.stringify({path:"/"+s})},responseType:"arraybuffer"});r(t.data)}catch(e){console.error("Error occurred during file download:",e),o(e)}}))}}const syncFolder=["book","config","cover","font"];class SyncUtil{constructor(e,t){"dropbox"===(this.type=e)&&(this.remote=new DropboxUtil(t))}downloadFile(e,t){return __awaiter(this,void 0,void 0,function*(){return yield this.remote.downloadFile(t+"/"+e,t+"/"+e)})}uploadFile(e,t){return __awaiter(this,void 0,void 0,function*(){return yield this.remote.uploadFile(t+"/"+e,t+"/"+e)})}listFiles(e){return __awaiter(this,void 0,void 0,function*(){return yield this.remote.listFiles(e)})}downloadAllFiles(){return __awaiter(this,void 0,void 0,function*(){for(var e of syncFolder){var t;for(t of yield this.listFiles(e))yield this.downloadFile(t,e)}})}authToken(e){return __awaiter(this,void 0,void 0,function*(){yield this.remote.authToken(e)})}}export{SyncUtil};
